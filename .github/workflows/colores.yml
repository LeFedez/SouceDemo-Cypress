name: Cypress E2E with Slack Reporter

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Cypress to Slack
        uses: LeFedez/cypress-e2e-slack-reporter@v1.0.3
        with:
          node-version: 18
          cypress-command: npx cypress run --reporter mochawesome --reporter-options reportDir=cypress/results,overwrite=false,html=true,json=true
          slack-username: CyBot
          slack-icon: https://pbs.twimg.com/profile_images/1512090708181725184/KAPAXmDg_400x400.jpg
          slack-title: "*Cypress E2E Test Results*"
          continue-on-cypress-error: true
        env:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}


