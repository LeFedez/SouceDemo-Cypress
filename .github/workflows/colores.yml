name: Cypress E2E with Slack Reporter

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Cypress to Slack
        uses: LeFedez/cypress-e2e-slack-reporter@v1.1.1
        with:
          node-version: 18
          cypress-command: npx cypress run --reporter mochawesome --reporter-options reportDir=cypress/results,overwrite=false,html=true,json=true
          slack-username: CyBoty
          slack-icon: https://drive.google.com/drive/u/0/folders/13It96b6W_F1uaPMpFqfMYR7zKfEpyEfe
          slack-title: "*Cypress E2E Test Results*"
          continue-on-cypress-error: true
          slack-webhook: ${{ secrets.SLACK_WEBHOOK }}

